{% include '_js/vue.js' %}
{% include '_js/vue/blank.js' %}
{% include '_js/vue/date-picker.js' %}
{% include '_js/vue/glossary.js' %}
{% include '_js/vue/letter-generator.js' %}
{% include '_js/vue/uniqueIdsMixin.js' %}
{% js %}
	document.querySelectorAll('.bescheinigung-in-steueresachen-letter').forEach(
		el => new Vue({
			el: el,
			mixins: [uniqueIdsMixin],
			data() {
				return {
					fullName: '',
					address: '',
					dateOfBirth: '',
					taxID: '',
					finanzamt: '',
					currentDate: new Date(),
					hasPaidFee: false,
				};
			},
		})
	);
{% endjs %}

<letter-generator :printable="false" class="bescheinigung-in-steueresachen-letter" track-as="Bescheinigung in Steuersachen letter" {% if static|default %}static{% endif %}>
{% raw %}
	<template v-slot:header>Request for a Bescheinigung in Steuersachen</template>

	<template v-slot:letter-body="{ language, stage }">
		<p v-if="language === 'en'">
			<strong>Request for a Bescheinigung in Steuersachen</strong>
		</p>
		<p v-if="language === 'de'">
			<strong>Antrag auf Erteilung einer Bescheinigung in Steuersachen</strong>
		</p>

		<p v-if="language === 'en'">Dear Sir or Madam,</p>
		<p v-if="language === 'de'">Sehr geehrte Damen und Herren,</p>

		<p v-if="language === 'en'">
			I am applying for the issuance of a <em>Bescheinigung in Steursachen</em>. The application form is attached.
		</p>
		<p v-if="language === 'de'">
			hiermit beantrage ich die Erteilung einer Bescheinigung in Steursachen. Das Antragsformular ist beigefügt.
		</p>

		<p v-if="language === 'en'">
			My details are as follows:
		</p>
		<p v-if="language === 'de'">
			Meine Angaben lauten wie folgt:
		</p>

		<ul>
			<li>
				Name:
				<blank placeholder="Full name">{{ fullName }}</blank>
			</li>
			<li>
				<template v-if="language === 'en'">Address:</template>
				<template v-if="language === 'de'">Anschrift:</template>
				<blank placeholder="Address">{{ address.replaceAll('\n', ', ') }}</blank>
			</li>
			<li>
				<template v-if="language === 'en'">Date of birth:</template>
				<template v-if="language === 'de'">Geburtsdatum:</template>
				<blank placeholder="Date of birth">{{ dateOfBirth }}</blank>
			</li>
			<li>
				<template v-if="language === 'en'">Tax ID:</template>
				<template v-if="language === 'de'">Steuer-ID:</template>
				<blank placeholder="Tax ID">{{ taxID }}</blank>
			</li>
		</ul>

		<p v-if="language === 'en'">
			<template v-if="hasPaidFee">I have already paid the fee of {% endraw %}{{ BESCHEINIGUNG_IN_STEUERSACHEN_FEE|cur }}€{% raw %} on {{ currentDate.toLocaleDateString("en-US") }}. </template>
			Please issue the requested document to my home address as soon as possible.
		</p>
		<p v-if="language === 'de'">
			<template v-if="hasPaidFee">Ich habe die Gebühr von {% endraw %}{{ BESCHEINIGUNG_IN_STEUERSACHEN_FEE|cur }}€{% raw %} bereits am {{ currentDate.toLocaleDateString("de-DE") }} bezahlt. </template>
			Bitte stellen Sie die angeforderte Bescheinigung so schnell wie möglich an meine Privatadresse aus.
		</p>

		<p v-if="language === 'en'">
			Best regards,<br>
			<blank placeholder="Full name">{{ fullName }}</blank>
		</p>
		<p v-if="language === 'de'">
			Mit freundlichen Grüßen,<br>
			<blank placeholder="Full name">{{ fullName }}</blank>
		</p>
	</template>

	<template v-slot:form="{ language }">
		<div class="form-group no-print required">
			<label :for="uid('fullName')">Your full name</label>
			<input type="text" :id="uid('fullName')" v-model="fullName" autocomplete="name">
		</div>
		<div class="form-group no-print required">
			<label :for="uid('address')">Your address</label>
			<div class="input-group">
				<textarea
					:id="uid('address')"
					v-model="address"
					class="address-input"
					autocomplete="street-address"
					placeholder="Wohnungstraße 123&#10;12345 Berlin"></textarea>
			</div>
		</div>
		<div class="form-group">
			<label :for="uid('date-of-birth') + '-day'">Date of birth</label>
			<div class="input-group">
				<date-picker
					v-model="dateOfBirth"
					:id="uid('date-of-birth')"
					autocomplete="bday"></date-picker>
			</div>
		</div>
		<div class="form-group no-print required">
			<label :for="uid('taxID')">Tax ID</label>
			<input type="text" :id="uid('taxID')" v-model="taxID" placeholder="12 345 678 901">
			<span class="input-instructions"><a href="/guides/german-tax-id-steuernummer#where-to-find-your-tax-id" target="_blank">Find your tax ID ➞</a></span>
		</div>
		<hr>
		<div class="form-group no-label no-print">
			<div class="input-group">
				<label class="checkbox">
					<input type="checkbox" v-model="hasPaidFee">
					<div>
						I already transferred {% endraw %}{{ BESCHEINIGUNG_IN_STEUERSACHEN_FEE|cur }}€{% raw %} to the <em>Finanzamt</em>(optional)
					</div>
				</label>
			</div>
		</div>
	</template>
{% endraw %}
</letter-generator>